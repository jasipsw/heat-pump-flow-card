## Summary

Added heat pump brand name display with icon and improved visual layout for better readability.

## Changes

### New: Brand Name Display with Icon (v0.20.6)

**Features:**
- ✅ Brand name text displays at top of heat pump box
- ✅ Simple building/factory icon next to brand name
- ✅ Text color matches heat pump state (uses same color as mode label)
- ✅ Improved spacing - all elements moved down 5px to accommodate brand name

**Configuration:**
```yaml
heat_pump:
  display_name: "Chiltrix CX50-2"  # Shows brand/model at top with icon
```

**Visual Changes:**
- Brand name and icon at y=10 (top of heat pump box)
- Fan moved down 5px (cy 40→45)
- Mode label moved down 5px (y 85→90)
- Error indicator moved down 5px (y 100→105)
- Metrics moved down 5px (metricsY 100→105, error case 115→120)

### Technical Implementation

**Initial Problem:**
- Brand name text wasn't rendering (zero dimensions) despite being in DOM
- Nested `html` template wrapper prevented proper rendering

**Solution Evolution:**
1. **Fixed template structure** - Removed nested `html` wrapper, changed to direct text element
2. **Improved text color** - Changed from calculated contrast color to heat pump state color for better readability
3. **Added icon** - Simple 3-building factory/company icon next to brand name
4. **Adjusted spacing** - Moved all elements down 5px to prevent crowding

**Before:**
```typescript
${this.config.heat_pump?.display_name ? html`
  <text x="60" y="20" fill="${hpTextColor}">...</text>
` : ''}
```

**After (Final - v0.20.6):**
```typescript
<!-- Always rendered, conditional opacity/content -->
<g transform="translate(35, 4)" opacity="${this.config.heat_pump?.display_name ? 0.8 : 0}">
  <rect x="0" y="3" width="5" height="6" fill="${this.getHeatPumpColor(hpState)}"/>
  <rect x="6" y="1" width="5" height="8" fill="${this.getHeatPumpColor(hpState)}"/>
  <rect x="12" y="3" width="5" height="6" fill="${this.getHeatPumpColor(hpState)}"/>
</g>
<text x="60" y="10" text-anchor="middle" fill="${this.getHeatPumpColor(hpState)}" font-size="10" font-weight="bold">
  ${this.config.heat_pump?.display_name || ''}
</text>
```

## Files Changed

- `src/heat-pump-flow-card.ts` - Brand name/icon display, improved spacing, text color fix, fan rotation fix
- `src/styles.ts` - Fan rotation transform-origin updated to match new fan center
- `src/const.ts` - Version bump to 0.20.6
- `package.json` - Version bump to 0.20.6
- `VERSION.md` - New version history file

## Test Plan

- [ ] Verify brand name text displays at top of heat pump box with icon
- [ ] Confirm text color matches heat pump state (same as mode label)
- [ ] Check icon displays to the left of brand name
- [ ] Verify fan rotates centered (not off-center or wobbly)
- [ ] Verify fan and other elements have proper spacing (not crowded)
- [ ] Test with and without `display_name` configured
- [ ] Verify text is readable on all background states (heating, DHW, off, defrost)

## Screenshots

**With Brand Name:**
- Brand name "Chiltrix CX50-2" at top with building icon
- Text color matches heat pump state (dark red in heating mode)
- Proper spacing between brand name and fan

**Without Brand Name:**
- No icon or text at top
- Normal layout (fan at original position relative to box)

## Breaking Changes

None - feature is opt-in via `heat_pump.display_name` configuration.

## Technical Notes

**Lit HTML SVG Pattern Learned:**
- ❌ Nested `html` template wrappers caused rendering issues: `${condition ? html`<text>...</text>` : ''}`
- ✅ **Final Solution**: Always render elements, use conditional opacity/content
  - Icon group: Always rendered with `opacity="${condition ? 0.8 : 0}"`
  - Text element: Always rendered with `${condition ? value : ''}`
- This avoids Lit's conditional fragment rendering issues in SVG contexts

**Fan Rotation Fix:**
- CSS transform-origin updated from `60px 40px` to `60px 45px` to match new fan center
- Fan center moved down 5px to accommodate brand name at top

**Color Choice:**
Using `this.getHeatPumpColor(hpState)` for brand text provides:
- Consistent visual hierarchy (matches mode label)
- Better readability than calculated contrast color
- Dynamic color based on state (red when heating, blue when cooling, gray when off)

**Version History:**
See VERSION.md for complete version history and changelog.
